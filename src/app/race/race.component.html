<div class="page">
    <div class="page-header">
        <app-nav-bar>
            <div class="btn-group">
                <button class="silent" [ngClass]="{checked: isHorn()}" (click)="horn()"><img src="assets/icons/horn.png"></button>
                <button [disabled]="!isDriving()" (click)="reset()"><img src="assets/icons/traffic_lights_red.png"></button>
            </div>
        </app-nav-bar>
    </div>
    <div class="page-content">
        <div *ngIf="!hasMaxAcceleration()">
            <button (click)="calcMaxAcceleration()"><img src="assets/icons/dice.png"></button>
        </div>
        <table *ngIf="hasMaxAcceleration()">
            <tr>
                <td>
                    <label><img src="assets/icons/arrow_turn_right.png">Kurve</label>
                </td>
                <td colspan="2">
                    <button (click)="selectCurve()"><span *ngIf="currentCurve !== undefined">{{currentCurve}}</span><img *ngIf="currentCurve === undefined" src="assets/icons/arrow_up.png"></button>
                </td>
            </tr>
            <tr>
                <td>
                    <label><img src="assets/icons/dashboard.png">Max. Geschw.</label>
                </td>
                <td>
                    <b>{{maxSpeedInCurve}}</b>
                </td>
                <td>
                    <button *ngIf="canArmCurvesJoker() && !isCurvesJokerArmed()" class="silent" (click)="armCurvesJoker()"><img src="assets/icons/dynamite.png"></button>
                    <span *ngIf="curvesJokerNoFx"><img src="assets/icons/snail.png" class="blink-warn"></span>
                    <span *ngIf="curvesJokerFailure"><img src="assets/icons/caution_high_voltage.png" class="blink-critical"></span>
                </td>
            </tr>
            <tr>
                <td>
                    <label><img src="assets/icons/dashboard.png">Geschw. wählen</label>
                </td>
                <td>
                    <div class="btn-group">
                        <button *ngFor="let s of nextSpeedOptions" [ngClass]="{checked: nextSpeed === s}" (click)="nextSpeed = s">{{s}}</button>
                    </div>
                </td>
                <td>
                    <button *ngIf="canArmSpeedJoker() && !isSpeedJokerArmed()" class="silent" (click)="armSpeedJoker()"><img src="assets/icons/dynamite.png"></button>
                    <span *ngIf="speedJokerNoFx"><img src="assets/icons/snail.png" class="blink-warn"></span>
                    <span *ngIf="speedJokerFailure"><img src="assets/icons/caution_high_voltage.png" class="blink-critical"></span>
                </td>
            </tr>
        </table>
        <button *ngIf="hasMaxAcceleration() && hasSpeedOptions" [disabled]="!canGo()" (click)="go()"><img src="assets/icons/arrow_up.png">Fahren<img src="assets/icons/arrow_up.png"></button>
        <button *ngIf="!hasSpeedOptions" (click)="giveUp()"><img src="assets/icons/fire.png">Aufgeben</button>
    </div>
    <div class="page-footer">
        <!--
        <div class="footer-item">
            <label><img src="assets/icons/gas.png">Tank <b>{{fuel}}</b></label>
        </div>
        -->
        <div class="footer-item">
            <label><img src="assets/icons/dashboard.png">Geschwindigkeit <b>{{speed}}</b></label>
        </div>
        <div class="footer-item">
            <label><img src="assets/icons/heart.png">Motor</label>
            <app-health [health]="motorHealth"></app-health>
        </div>
        <div class="footer-item">
            <label><img src="assets/icons/tire.png">Reifen</label>
            <app-health [health]="tiresHealth"></app-health>
        </div>
    </div>
</div>
<app-dialog title="Curve">
    <h1>Kurve wählen</h1>
    <div class="btn-group">
        <button *ngFor="let c of curves" [ngClass]="{checked: currentCurve === c}" (click)="currentCurve = c">{{c}}</button>
    </div>
    <button [ngClass]="{checked: currentCurve === undefined}" (click)="currentCurve = undefined"><img src="assets/icons/arrow_up.png"></button>
</app-dialog>